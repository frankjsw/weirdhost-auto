name: 新增加服务器时间

on:
  # 这里可以根据需要设置触发方式，例如每次推送，或者定时任务等
  push:
    branches:
      - main
  workflow_dispatch:  # 允许手动触发

jobs:
  add-time:
    runs-on: ubuntu-latest

    steps:
      # 检出代码
      - name: 检出代码
        uses: actions/checkout@v4

      # 设置 Python 环境
      - name: 设置 Python 环境
        uses: actions/setup-python@v5
        with:
          python-version: '3.10'  # 设置 Python 版本

      # 安装依赖项
      - name: 安装依赖项
        run: |
          python -m pip install --upgrade pip
          pip install requests  # 安装 requests 库用于 API 请求

      - name: Install dependencies
        run: |
          pip install playwright requests
          playwright install chromium

      # 运行 Python 脚本
      - name: 运行增加服务器时间脚本
        env:
          API_KEY: ${{ secrets.API_KEY }}  # 从 GitHub Secrets 获取 API 密钥
        run: |
          python add_server_time.py  # 运行您的 Python 脚本
